<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="quitbutton" content="visibility:visible;" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="./styles/jquery.mobile-1.1.1.css" />
		<script src="./libs/jquery-1.8.2.js" type="text/javascript" charset="utf-8"></script>
		<script src="./libs/jquery.mobile-1.1.1.js" type="text/javascript" charset="utf-8"></script>
		<script src="http://maps.google.com/maps/api/js?sensor=false"></script>

		<script type="text/javascript">
			var center;
			var map = null;

			function Newinitialize(lat, lng) {
				center = new google.maps.LatLng(lat, lng);
				var myOptions = {
					zoom : 14,
					center : center,
					mapTypeId : google.maps.MapTypeId.SATELLITE
				}
				map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

			}

			function detectBrowser() {
				var useragent = navigator.userAgent;
				var mapdivMap = document.getElementById("map_canvas");

				if (useragent.indexOf('iPhone') != -1 || useragent.indexOf('Android') != -1) {
					mapdivMap.style.width = '100%';
					mapdivMap.style.height = '100%';
				} else {
					mapdivMap.style.width = '600px';
					mapdivMap.style.height = '800px';
				}
			};

			$(document).bind('pageload', function() {
				if (navigator.geolocation) {
					detectBrowser();
					navigator.geolocation.getCurrentPosition(function(position) {
						Newinitialize(position.coords.latitude, position.coords.longitude);
					});
				} else {
					detectBrowser();
					Newinitialize(52.636161, -1.133065);
				}
			});
		</script>

	</head>

	<body>

		<div data-role="page" class="page-map" id="patient-locations" style="width:100%; height:100%;">
			<div data-role="header" data-position="fixed">
				<a href="" data-rel="back">Back</a>
				<h2>Patient Locations</h2>
			</div>
			<div data-role="content" style="width:100%; height:100%; padding:0;">
				<div id="map_canvas" style="width:100%; height:100%;"></div>
			</div>
		</div>
	</body>
</html>

