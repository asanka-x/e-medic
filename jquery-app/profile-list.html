<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="quitbutton" content="visibility:visible;" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--<link rel="stylesheet" href="./styles/jquery.mobile-1.1.1.css" />-->
		<link rel="stylesheet" href="./styles/e-midwife-custom-theme.css" />
		<link rel="stylesheet" href="./styles/jquery.mobile.structure-1.1.1.min.css" />

		<script src="./libs/jquery-1.8.2.js" type="text/javascript" charset="utf-8"></script>
		<script src="./libs/jquery.mobile-1.1.1.js" type="text/javascript" charset="utf-8"></script>
		<script src="./libs/knockout/knockout-2.1.0pre.js" type="text/javascript" charset="utf-8"></script>

		<!--<script src="./src/bindings/profile-list.js" type="text/javascript"></script>-->

	</head>

	<body>
		<div data-role="page">

			<div data-role="header" data-position="fixed">
				<a href="" data-rel="back" data-ajax="false" data-theme="c">Back</a>

				<h1>m-Midwife</h1>
			</div><!-- /header -->

			<div data-role="content">
				<ul data-role="listview" data-filter="true" data-filter-placeholder="Search family..." data-inset="true" data-theme="a" data-bind="foreach:familyProfile">
					<li data-filtertext="NASDAQ:Family">
						<a href="#family-profile" data-bind="text: family, click:$root.familyClicked"></a>
					</li>
				</ul>
			</div><!-- /content -->
			<div data-role="footer" data-position="fixed">
				<div data-role="navbar">
					<ul>
						<li>
							<a href="new-family.html" data-ajax="false" data-theme="c">New Family</a>
						</li>
					</ul>
				</div><!-- /navbar -->

			</div>
		</div>

		<div data-role="page" id="family-profile">

			<div data-role="header" data-position="fixed">
				<a href="" data-rel="back" data-ajax="false" data-theme="c">Back</a>

				<h1>m-Midwife</h1>
			</div><!-- /header -->

			<div data-role="content" id="list-content">
				<div class="ui-grid-a">
					<div class="ui-block-a">
						<img src="./styles/icon/midwife.jpg" class="ui-li-icon" style="width:50%"/>
					</div>
					<div class="ui-block-b">

						<span data-bind="text: regNo"></span>
						<br />
						<br />
						<span data-bind="text: wife"></span>
						<br />
						<br />
						<span data-bind="text: husband"></span>
						<br />
						<br />
						<span data-bind="text: mdate"></span>
						<br />
						<br />
					</div>
				</div>
				<div class="ui-grid-solo">
					<div class="ui-block-a">
						<span data-bind="text: bdate"></span>
						<br />
						<br />
						<span data-bind="text: address"></span>
						<br />
						<br />
						<label for="address">Pregnancies</label>
						<br />
						<br />
						<label for="address">Children</label>
						<br />
						<br />
						<label for="address">Location</label>
					</div>
				</div>
			</div><!-- /content -->
			<div data-role="footer" data-position="fixed">
				<div data-role="navbar">
					<ul>
						<li>
							<a href="new-baby.html" data-ajax="false" data-theme="c">New Baby</a>
						</li>
						<li>
							<a href="new-pregnancy.html" data-ajax="false" data-theme="c">New Pregnancy</a>
						</li>
					</ul>
				</div><!-- /navbar -->
			</div>
		</div>
		<script type="text/javascript">
			function FamilyProfilesViewModel() {
				var self = this;

				this.familyProfile = ko.observableArray();
				this.regNo = ko.observable("Reg No");
				this.wife = ko.observable();
				this.husband = ko.observable();
				this.mdate = ko.observable();
				this.bdate = ko.observable();
				this.address = ko.observable();

				this.familyClicked = function(family) {
					console.log(family.id);
					self.regNo(family.id);
					self.wife(family.wife);
					self.husband(family.husband);
					self.mdate(family.mdate);
					self.bdate(family.bdate);
					self.bdate(family.address);
				};

				/*
				 * Initialization code:
				 * Get the employee list from server
				 */
				this.familyProfile = [{
					"id" : "01",
					"family" : "Senawiratne K.K.P.",
					"wife" : "Mallika",
					"husband" : "Saman",
					"mdate" : "2012-02-03",
					"bdate" : "1977-03-06",
					"address" : "No 54/1, Wijerama, Colombo"
				}, {
					"id" : "02",
					"family" : "Perera L.P.",
					"wife" : "Mallika",
					"husband" : "Mallika",
					"mdate" : "Mallika",
					"bdate" : "Mallika",
					"address" : "No 54/6, Samagi road, Colombo"
				}, {
					"id" : "03",
					"family" : "Ranaweera J.N.",
					"wife" : "Mallika",
					"husband" : "Mallika",
					"mdate" : "Mallika",
					"bdate" : "Mallika",
					"address" : "No 54/9, Samagi road, Colombo"
				}]
			}


			ko.applyBindings(new FamilyProfilesViewModel());
		</script>
	</body>
</html>

